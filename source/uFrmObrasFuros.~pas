unit uFrmObrasFuros;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, uFrmPadrao, ExtCtrls, SUIButton, SUIDBCtrls, Grids, DBGrids,
  SUIImagePanel, SUIForm, StdCtrls;

type
  TFrmObrasFuros = class(TFrmPadrao)
    Label1: TLabel;
    txtObra: TStaticText;
    Label2: TLabel;
    txtCliente: TStaticText;
    txtID: TLabel;
    procedure btnIncluirClick(Sender: TObject);
    procedure btnAlterarClick(Sender: TObject);
    procedure btnExcluirClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    procedure chamarTelaEdicao(strOpcao: string);
  end;

var
  FrmObrasFuros: TFrmObrasFuros;

implementation

{$R *.dfm}
uses uDatamodule,uFuncoes;

procedure TFrmObrasFuros.btnIncluirClick(Sender: TObject);
begin
  inherited;
  chamarTelaEdicao('I')
end;

procedure TFrmObrasFuros.btnAlterarClick(Sender: TObject);
begin
  inherited;
  chamarTelaEdicao('A')
end;

procedure TFrmObrasFuros.btnExcluirClick(Sender: TObject);
begin
  inherited;
  chamarTelaEdicao('E')
end;

procedure TFrmObrasFuros.chamarTelaEdicao(strOpcao: string);
begin
 //chamar a tela de edição como a opção (I)ncluir, (A)lterar ou (E)xcluir
if strOpcao<>'I' then begin
 if datamodule1.qrylocal_clientes.RecordCount = 0 then
  begin
      myMSG( 'Tabela Vazia! ','Opção não disponível',2);
      exit;
  end

  
 timer1.Enabled:=false;
 if not assigned(FrmObrasFurosEdicao) then
                 FrmObrasFurosEdicao:=TFrmObrasFurosEdicao.Create(Application);
                 FrmObrasFurosEdicao.FrmObrasFurosEdicao.carregarCampos(strOpcao);
                 FrmObrasFurosEdicao.ShowModal;
                  FreeAndNil(FrmObrasFurosEdicao);
t imer1.Enabled:=true;

end;

end.
