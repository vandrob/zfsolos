unit uFrmAbertura;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, SUIForm, SUIButton, jpeg, SUIImagePanel, Menus,
  ActnList, SUIMainMenu, StdCtrls, ImgList, SUIDlg;

type
  TFrmAbertura = class(TForm)
    suiForm1: TsuiForm;
    Image1: TImage;
    suiMainMenu1: TsuiMainMenu;
    Arquivos1: TMenuItem;
    Clientes1: TMenuItem;
    Usurios1: TMenuItem;
    MuraldeRecados1: TMenuItem;
    N1: TMenuItem;
    Sair1: TMenuItem;
    Ferramentas1: TMenuItem;
    Usurios2: TMenuItem;
    AtualizaesdoSoftware1: TMenuItem;
    Backup1: TMenuItem;
    ActionList2: TActionList;
    ActClientes: TAction;
    ActCalculos: TAction;
    ActMetodos: TAction;
    ActUsuarios: TAction;
    ActMural: TAction;
    ActAtualizacoes: TAction;
    ActSair: TAction;
    ActBackup: TAction;
    Metodos1: TMenuItem;
    ImageList1: TImageList;
    mensagem: TsuiMessageDialog;
    suiPasswordDialog1: TsuiPasswordDialog;
    procedure btnSairClick(Sender: TObject);
    procedure ActClientesExecute(Sender: TObject);
    procedure ActBackupExecute(Sender: TObject);
    procedure ActMetodosExecute(Sender: TObject);
    procedure ActUsuariosExecute(Sender: TObject);
    procedure ActMuralExecute(Sender: TObject);
    procedure ActAtualizacoesExecute(Sender: TObject);
    procedure ActSairExecute(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmAbertura: TFrmAbertura;
  usuario_nome:string;
  usuario_id  :integer;
  usuario_logado:boolean;

implementation

uses uFuncoes, uFrmUsuarios, uFrmTeste, uFrmClientes;


{$R *.dfm}

procedure TFrmAbertura.btnSairClick(Sender: TObject);
begin
 application.terminate;
end;

procedure TFrmAbertura.ActClientesExecute(Sender: TObject);
begin

   if not assigned(FrmClientes) then
                 FrmClientes:=TFrmClientes.Create(Application);
                 FrmClientes.ShowModal;
                 FreeAndNil(FrmClientes);

end;

procedure TFrmAbertura.ActBackupExecute(Sender: TObject);
begin
 showmessage('f');
end;

procedure TFrmAbertura.ActMetodosExecute(Sender: TObject);
begin
 showmessage('c');
end;

procedure TFrmAbertura.ActUsuariosExecute(Sender: TObject);
begin

   if not assigned(FrmUsuarios) then
                 FrmUsuarios:=TFrmUsuarios.Create(Application);
                 FrmUsuarios.ShowModal;
                 FreeAndNil(FrmUsuarios);




end;

procedure TFrmAbertura.ActMuralExecute(Sender: TObject);
begin
 showmessage('e');
end;

procedure TFrmAbertura.ActAtualizacoesExecute(Sender: TObject);
begin
 showmessage('g');
end;

procedure TFrmAbertura.ActSairExecute(Sender: TObject);
begin
 close;
end;

procedure TFrmAbertura.FormClose(Sender: TObject;
  var Action: TCloseAction);
begin
  if myConfirm('Sair da aplicação?') then
   Action:=caFree
  else
   Action:=caNone
  ;
end;

procedure TFrmAbertura.FormActivate(Sender: TObject);
begin
 if not usuario_logado then
  begin
    login;
  end;
end;

initialization
  usuario_nome:='';
  usuario_id  :=0;
  usuario_logado:=false;

end.
